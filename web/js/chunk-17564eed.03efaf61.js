(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-17564eed"],{a608:function(e,t,o){"use strict";o("de8c")},cbf4:function(e,t,o){"use strict";o.r(t);o("d3b7"),o("25f0");var r=o("7a23");Object(r["pushScopeId"])("data-v-276126b0");var c={class:"deploy-box"},n=Object(r["createTextVNode"])("默认安装"),a=Object(r["createTextVNode"])("重新安装"),l=Object(r["createTextVNode"])("仅升级V2ray"),i=Object(r["createTextVNode"])("仅配置V2ray"),u=Object(r["createTextVNode"])("预设配置(WebSocket)"),d=Object(r["createTextVNode"])("预设配置(KCP)"),f=Object(r["createTextVNode"])("自定义配置"),s={class:"inline-form-item-2"},m=Object(r["createTextVNode"])("添加自定义请求头字段"),b={class:"inline-form-item-3"},p=Object(r["createTextVNode"])("添加自定义响应头字段"),_=Object(r["createTextVNode"])("添加自定义头字段"),O={class:"inline-form-item-2"},j={class:"inline-form-item-2"},V={class:"inline-form-item-2"},h=Object(r["createTextVNode"])("MB/S"),y=Object(r["createTextVNode"])("MB"),v={class:"inline-form-item-2"},g=Object(r["createTextVNode"])("MB/S"),w=Object(r["createTextVNode"])("MB"),N={class:"inline-form-item-2"},k={class:"inline-form-item-2"},C=Object(r["createTextVNode"])("Cloudreve配置信息"),x={key:0,class:"inline-form-item-2"},T=Object(r["createTextVNode"])("返回列表"),B=Object(r["createTextVNode"])("开始部署");function S(e,t,o,S,U,I){var E=Object(r["resolveComponent"])("el-radio"),P=Object(r["resolveComponent"])("el-radio-group"),H=Object(r["resolveComponent"])("el-form-item"),q=Object(r["resolveComponent"])("el-input"),z=Object(r["resolveComponent"])("el-option"),F=Object(r["resolveComponent"])("el-select"),D=Object(r["resolveComponent"])("el-button"),M=Object(r["resolveComponent"])("el-switch"),A=Object(r["resolveComponent"])("el-collapse-item"),K=Object(r["resolveComponent"])("el-alert"),R=Object(r["resolveComponent"])("el-divider"),L=Object(r["resolveComponent"])("el-checkbox"),W=Object(r["resolveComponent"])("el-collapse"),$=Object(r["resolveComponent"])("el-form");return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",c,[Object(r["createVNode"])($,{ref:"V2rayServerDeploy",model:e.form,rules:e.rules,"label-width":"120px"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(H,{label:"安装方式"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(P,{modelValue:e.form.install_type,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.form.install_type=t})},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(E,{label:1},{default:Object(r["withCtx"])((function(){return[n]})),_:1}),Object(r["createVNode"])(E,{label:2},{default:Object(r["withCtx"])((function(){return[a]})),_:1}),Object(r["createVNode"])(E,{label:3},{default:Object(r["withCtx"])((function(){return[l]})),_:1}),Object(r["createVNode"])(E,{label:4},{default:Object(r["withCtx"])((function(){return[i]})),_:1})]})),_:1},8,["modelValue"])]})),_:1}),Object(r["createVNode"])(H,{label:"管理员口令",prop:"management_key"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(q,{modelValue:e.form.management_key,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.form.management_key=t}),placeholder:"管理员口令"},null,8,["modelValue"])]})),_:1}),3!==parseInt(e.form.install_type.toString())?(Object(r["openBlock"])(),Object(r["createBlock"])(W,{key:0,modelValue:e.active,"onUpdate:modelValue":t[31]||(t[31]=function(t){return e.active=t}),class:"margin-bottom"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(A,{name:1,title:"V2ray配置选项"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(H,{label:"选择配置"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(P,{modelValue:e.form.config_type,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.form.config_type=t})},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(E,{label:1},{default:Object(r["withCtx"])((function(){return[u]})),_:1}),Object(r["createVNode"])(E,{label:2},{default:Object(r["withCtx"])((function(){return[d]})),_:1}),Object(r["createVNode"])(E,{label:3},{default:Object(r["withCtx"])((function(){return[f]})),_:1})]})),_:1},8,["modelValue"])]})),_:1}),Object(r["createVNode"])(H,{label:"传输方式",prop:"transport_type"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(F,{modelValue:e.form.v2ray_config.transport_type,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.form.v2ray_config.transport_type=t}),class:"w-100"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(z,{value:1,label:"TCP"}),Object(r["createVNode"])(z,{value:2,label:"WebSocket"}),Object(r["createVNode"])(z,{value:3,label:"KCP"}),Object(r["createVNode"])(z,{value:4,label:"HTTP2"})]})),_:1},8,["modelValue"])]})),_:1}),1===parseInt(e.form.v2ray_config.transport_type.toString())||3===parseInt(e.form.v2ray_config.transport_type.toString())?(Object(r["openBlock"])(),Object(r["createBlock"])(H,{key:0,label:"监听端口"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(q,{modelValue:e.form.v2ray_config.v2ray_port,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.form.v2ray_config.v2ray_port=t}),placeholder:"V2ray监听的端口号"},null,8,["modelValue"])]})),_:1})):Object(r["createCommentVNode"])("",!0),(Object(r["openBlock"])(!0),Object(r["createElementBlock"])(r["Fragment"],null,Object(r["renderList"])(e.form.v2ray_config.clients,(function(e){return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",{key:e,class:"inline-form-item-client"},[Object(r["createVNode"])(H,{class:"form-item-user-id",label:"用户ID"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(q,{modelValue:e.user_id,"onUpdate:modelValue":function(t){return e.user_id=t},placeholder:"用户ID，请勿使用过短的用户ID，若不填写将会自动生成"},null,8,["modelValue","onUpdate:modelValue"])]})),_:2},1024),Object(r["createVNode"])(H,{class:"form-item-alter-id",label:"额外ID","label-width":"60px"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(q,{modelValue:e.alter_id,"onUpdate:modelValue":function(t){return e.alter_id=t},max:"65535",min:"0",placeholder:"额外ID的数量，推荐值4，可选值0-65535",type:"number"},null,8,["modelValue","onUpdate:modelValue"])]})),_:2},1024)])})),128)),1===parseInt(e.form.v2ray_config.transport_type.toString())?(Object(r["openBlock"])(),Object(r["createElementBlock"])(r["Fragment"],{key:1},[Object(r["createVNode"])(H,{label:"伪装类型"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(F,{modelValue:e.form.v2ray_config.tcp.type,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.form.v2ray_config.tcp.type=t})},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(z,{label:"NONE",value:"none"}),Object(r["createVNode"])(z,{label:"HTTP",value:"http"})]})),_:1},8,["modelValue"])]})),_:1}),"http"===e.form.v2ray_config.tcp.type?(Object(r["openBlock"])(),Object(r["createElementBlock"])(r["Fragment"],{key:0},[Object(r["createElementVNode"])("div",s,[Object(r["createVNode"])(H,{class:"form-item",label:"请求版本"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(F,{modelValue:e.form.v2ray_config.tcp.request.version,"onUpdate:modelValue":t[6]||(t[6]=function(t){return e.form.v2ray_config.tcp.request.version=t}),class:"w-100"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(z,{label:"HTTP/1.1",value:"1.1"})]})),_:1},8,["modelValue"])]})),_:1}),Object(r["createVNode"])(H,{class:"form-item",label:"请求方式"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(F,{modelValue:e.form.v2ray_config.tcp.request.method,"onUpdate:modelValue":t[7]||(t[7]=function(t){return e.form.v2ray_config.tcp.request.method=t}),class:"w-100"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(z,{label:"GET",value:"GET"}),Object(r["createVNode"])(z,{label:"POST",value:"POST"})]})),_:1},8,["modelValue"])]})),_:1})]),Object(r["createVNode"])(H,{label:"请求路径"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(q,{modelValue:e.form.v2ray_config.tcp.request.path,"onUpdate:modelValue":t[8]||(t[8]=function(t){return e.form.v2ray_config.tcp.request.path=t}),placeholder:"请求路径，多个路径用英文,分隔，每次请求会随机选择一个，默认为/"},null,8,["modelValue"])]})),_:1}),(Object(r["openBlock"])(!0),Object(r["createElementBlock"])(r["Fragment"],null,Object(r["renderList"])(e.form.v2ray_config.tcp.request.headers,(function(e){return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",{key:e,class:"inline-form-item-2"},[Object(r["createVNode"])(H,{class:"form-item",label:"字段名"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(q,{modelValue:e.key,"onUpdate:modelValue":function(t){return e.key=t},placeholder:"自定义头的字段名称"},null,8,["modelValue","onUpdate:modelValue"])]})),_:2},1024),Object(r["createVNode"])(H,{class:"form-item",label:"字段值"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(q,{modelValue:e.value,"onUpdate:modelValue":function(t){return e.value=t},placeholder:"自定义头的字段值"},null,8,["modelValue","onUpdate:modelValue"])]})),_:2},1024)])})),128)),Object(r["createVNode"])(H,{class:"content-center","label-width":"0"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(D,{type:"primary",onClick:e.addTcpRequestHeader},{default:Object(r["withCtx"])((function(){return[m]})),_:1},8,["onClick"])]})),_:1}),Object(r["createElementVNode"])("div",b,[Object(r["createVNode"])(H,{class:"form-item",label:"响应版本"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(F,{modelValue:e.form.v2ray_config.tcp.response.version,"onUpdate:modelValue":t[9]||(t[9]=function(t){return e.form.v2ray_config.tcp.response.version=t}),class:"w-100"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(z,{label:"HTTP/1.1",value:"1.1"})]})),_:1},8,["modelValue"])]})),_:1}),Object(r["createVNode"])(H,{class:"form-item",label:"状态码"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(q,{modelValue:e.form.v2ray_config.tcp.response.status,"onUpdate:modelValue":t[10]||(t[10]=function(t){return e.form.v2ray_config.tcp.response.status=t}),placeholder:"HTTP响应的状态码，默认为200"},null,8,["modelValue"])]})),_:1}),Object(r["createVNode"])(H,{class:"form-item",label:"状态描述"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(q,{modelValue:e.form.v2ray_config.tcp.response.reason,"onUpdate:modelValue":t[11]||(t[11]=function(t){return e.form.v2ray_config.tcp.response.reason=t}),placeholder:"HTTP响应的状态描述，默认为OK"},null,8,["modelValue"])]})),_:1})]),(Object(r["openBlock"])(!0),Object(r["createElementBlock"])(r["Fragment"],null,Object(r["renderList"])(e.form.v2ray_config.tcp.response.headers,(function(e){return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",{key:e,class:"inline-form-item-2"},[Object(r["createVNode"])(H,{class:"form-item",label:"字段名"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(q,{modelValue:e.key,"onUpdate:modelValue":function(t){return e.key=t},placeholder:"自定义头的字段名称"},null,8,["modelValue","onUpdate:modelValue"])]})),_:2},1024),Object(r["createVNode"])(H,{class:"form-item",label:"字段值"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(q,{modelValue:e.value,"onUpdate:modelValue":function(t){return e.value=t},placeholder:"自定义头的字段值"},null,8,["modelValue","onUpdate:modelValue"])]})),_:2},1024)])})),128)),Object(r["createVNode"])(H,{class:"content-center","label-width":"0"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(D,{type:"primary",onClick:e.addTcpResponseHeader},{default:Object(r["withCtx"])((function(){return[p]})),_:1},8,["onClick"])]})),_:1})],64)):Object(r["createCommentVNode"])("",!0)],64)):Object(r["createCommentVNode"])("",!0),2===parseInt(e.form.v2ray_config.transport_type.toString())?(Object(r["openBlock"])(),Object(r["createElementBlock"])(r["Fragment"],{key:2},[Object(r["createVNode"])(H,{label:"路径"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(q,{modelValue:e.form.v2ray_config.web_socket.path,"onUpdate:modelValue":t[12]||(t[12]=function(t){return e.form.v2ray_config.web_socket.path=t}),placeholder:"URI路径"},null,8,["modelValue"])]})),_:1}),(Object(r["openBlock"])(!0),Object(r["createElementBlock"])(r["Fragment"],null,Object(r["renderList"])(e.form.v2ray_config.web_socket.headers,(function(e){return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",{key:e,class:"inline-form-item-2"},[Object(r["createVNode"])(H,{class:"form-item",label:"字段名"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(q,{modelValue:e.key,"onUpdate:modelValue":function(t){return e.key=t},placeholder:"自定义头的字段名称"},null,8,["modelValue","onUpdate:modelValue"])]})),_:2},1024),Object(r["createVNode"])(H,{class:"form-item",label:"字段值"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(q,{modelValue:e.value,"onUpdate:modelValue":function(t){return e.value=t},placeholder:"自定义头的字段值"},null,8,["modelValue","onUpdate:modelValue"])]})),_:2},1024)])})),128)),Object(r["createVNode"])(H,{class:"content-center","label-width":"0"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(D,{type:"primary",onClick:e.addWebSocketHeader},{default:Object(r["withCtx"])((function(){return[_]})),_:1},8,["onClick"])]})),_:1})],64)):Object(r["createCommentVNode"])("",!0),3===parseInt(e.form.v2ray_config.transport_type.toString())?(Object(r["openBlock"])(),Object(r["createElementBlock"])(r["Fragment"],{key:3},[Object(r["createElementVNode"])("div",O,[Object(r["createVNode"])(H,{class:"form-item",label:"伪装类型"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(F,{modelValue:e.form.v2ray_config.kcp.type,"onUpdate:modelValue":t[13]||(t[13]=function(t){return e.form.v2ray_config.kcp.type=t}),class:"w-100"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(z,{label:"none",value:"none"}),Object(r["createVNode"])(z,{label:"srtp",value:"srtp"}),Object(r["createVNode"])(z,{label:"utp",value:"utp"}),Object(r["createVNode"])(z,{label:"wechat-video",value:"wechat-video"}),Object(r["createVNode"])(z,{label:"dtls",value:"dtls"}),Object(r["createVNode"])(z,{label:"wireguard",value:"wireguard"})]})),_:1},8,["modelValue"])]})),_:1}),Object(r["createVNode"])(H,{class:"form-item",label:"开启拥塞控制"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(M,{modelValue:e.form.v2ray_config.kcp.congestion,"onUpdate:modelValue":t[14]||(t[14]=function(t){return e.form.v2ray_config.kcp.congestion=t})},null,8,["modelValue"])]})),_:1})]),Object(r["createElementVNode"])("div",j,[Object(r["createVNode"])(H,{class:"form-item",label:"MTU大小"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(q,{modelValue:e.form.v2ray_config.kcp.mtu,"onUpdate:modelValue":t[15]||(t[15]=function(t){return e.form.v2ray_config.kcp.mtu=t}),max:"1460",min:"576",placeholder:"传输单元大小，576-1460之间的整数，默认为1350",type:"number"},null,8,["modelValue"])]})),_:1}),Object(r["createVNode"])(H,{class:"form-item",label:"TTI间隔时间"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(q,{modelValue:e.form.v2ray_config.kcp.tti,"onUpdate:modelValue":t[16]||(t[16]=function(t){return e.form.v2ray_config.kcp.tti=t}),max:"100",min:"10",placeholder:"传输间隔时间，10-100之间的整数，默认为50",type:"number"},null,8,["modelValue"])]})),_:1})]),Object(r["createElementVNode"])("div",V,[Object(r["createVNode"])(H,{class:"form-item",label:"上行带宽"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(q,{modelValue:e.form.v2ray_config.kcp.uplink_capacity,"onUpdate:modelValue":t[17]||(t[17]=function(t){return e.form.v2ray_config.kcp.uplink_capacity=t}),min:"0",placeholder:"上行带宽大小，默认为5，单位MB/s",type:"number"},{append:Object(r["withCtx"])((function(){return[h]})),_:1},8,["modelValue"])]})),_:1}),Object(r["createVNode"])(H,{class:"form-item",label:"读取缓冲区大小"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(q,{modelValue:e.form.v2ray_config.kcp.read_buffer_size,"onUpdate:modelValue":t[18]||(t[18]=function(t){return e.form.v2ray_config.kcp.read_buffer_size=t}),min:"1",placeholder:"读取缓冲区大小，默认为2，单位MB",type:"number"},{append:Object(r["withCtx"])((function(){return[y]})),_:1},8,["modelValue"])]})),_:1})]),Object(r["createElementVNode"])("div",v,[Object(r["createVNode"])(H,{class:"form-item",label:"下行带宽"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(q,{modelValue:e.form.v2ray_config.kcp.downlink_capacity,"onUpdate:modelValue":t[19]||(t[19]=function(t){return e.form.v2ray_config.kcp.downlink_capacity=t}),min:"0",placeholder:"下行带宽大小，默认为20，单位MB/s",type:"number"},{append:Object(r["withCtx"])((function(){return[g]})),_:1},8,["modelValue"])]})),_:1}),Object(r["createVNode"])(H,{class:"form-item",label:"写入缓冲区大小"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(q,{modelValue:e.form.v2ray_config.kcp.write_buffer_size,"onUpdate:modelValue":t[20]||(t[20]=function(t){return e.form.v2ray_config.kcp.write_buffer_size=t}),min:"1",placeholder:"写入缓冲区大小，默认为2，单位MB",type:"number"},{append:Object(r["withCtx"])((function(){return[w]})),_:1},8,["modelValue"])]})),_:1})])],64)):Object(r["createCommentVNode"])("",!0),4===parseInt(e.form.v2ray_config.transport_type.toString())?(Object(r["openBlock"])(),Object(r["createElementBlock"])(r["Fragment"],{key:4},[Object(r["createVNode"])(H,{label:"域名"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(q,{modelValue:e.form.v2ray_config.http2.host,"onUpdate:modelValue":t[21]||(t[21]=function(t){return e.form.v2ray_config.http2.host=t}),placeholder:"HTTP2的域名列表，多个使用英文,分隔。列表内会自动添加HTTPS的域名，请不要重复添加"},null,8,["modelValue"])]})),_:1}),Object(r["createVNode"])(H,{label:"路径"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(q,{modelValue:e.form.v2ray_config.http2.path,"onUpdate:modelValue":t[22]||(t[22]=function(t){return e.form.v2ray_config.http2.path=t}),placeholder:"URI路径"},null,8,["modelValue"])]})),_:1})],64)):Object(r["createCommentVNode"])("",!0)]})),_:1}),4!==parseInt(e.form.install_type.toString())?(Object(r["openBlock"])(),Object(r["createBlock"])(A,{key:0,name:2,title:"HTTPS配置选项"},{default:Object(r["withCtx"])((function(){return[3===parseInt(e.form.v2ray_config.transport_type.toString())?(Object(r["openBlock"])(),Object(r["createBlock"])(K,{key:0,title:"KCP模式使用UDP协议通讯，不支持启用HTTPS设置",type:"warning",closable:!1,class:"margin-bottom"})):Object(r["createCommentVNode"])("",!0),4===parseInt(e.form.v2ray_config.transport_type.toString())?(Object(r["openBlock"])(),Object(r["createBlock"])(K,{key:1,title:"HTTPS模式基于TLS证书，必须启用HTTPS",type:"warning",closable:!1,class:"margin-bottom"})):Object(r["createCommentVNode"])("",!0),2!==parseInt(e.form.v2ray_config.transport_type.toString())||e.form.use_tls?Object(r["createCommentVNode"])("",!0):(Object(r["openBlock"])(),Object(r["createBlock"])(K,{key:2,title:"建议启用HTTPS，HTTP协议为明文传输协议，不利于隐私保护与代理稳定性",type:"warning",closable:!1,class:"margin-bottom"})),Object(r["createElementVNode"])("div",N,[Object(r["createVNode"])(H,{label:"使用HTTPS",class:"form-item-0"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(M,{modelValue:e.form.use_tls,"onUpdate:modelValue":t[23]||(t[23]=function(t){return e.form.use_tls=t}),disabled:3===parseInt(e.form.v2ray_config.transport_type.toString())||4===parseInt(e.form.v2ray_config.transport_type.toString())},null,8,["modelValue","disabled"])]})),_:1}),Object(r["createVNode"])(H,{label:"HTTPS域名",prop:"tls_host",class:"form-item-1"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(q,{disabled:!e.form.use_tls,modelValue:e.form.tls_host,"onUpdate:modelValue":t[24]||(t[24]=function(t){return e.form.tls_host=t}),placeholder:"HTTPS域名，该域名必须已被解析到目标服务器的IP地址"},null,8,["disabled","modelValue"])]})),_:1})])]})),_:1})):Object(r["createCommentVNode"])("",!0),4!==parseInt(e.form.install_type.toString())?(Object(r["openBlock"])(),Object(r["createBlock"])(A,{key:1,name:3,title:"伪装配置选项"},{default:Object(r["withCtx"])((function(){return[1===parseInt(e.form.v2ray_config.transport_type.toString())||3===parseInt(e.form.v2ray_config.transport_type.toString())?(Object(r["openBlock"])(),Object(r["createBlock"])(K,{key:0,title:"TCP模式与KCP模式需要由V2ray自己监听端口，不支持伪装",type:"warning",closable:!1,class:"margin-bottom"})):Object(r["createCommentVNode"])("",!0),2!==parseInt(e.form.v2ray_config.transport_type.toString())&&2!==parseInt(e.form.v2ray_config.transport_type.toString())||e.form.enable_web_service?Object(r["createCommentVNode"])("",!0):(Object(r["openBlock"])(),Object(r["createBlock"])(K,{key:1,title:"建议配置伪装站点，可以增强代理稳定性，不容易被封锁",type:"warning",closable:!1,class:"margin-bottom"})),Object(r["createElementVNode"])("div",k,[Object(r["createVNode"])(H,{class:"form-item-0",label:"开启伪装"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(M,{modelValue:e.form.enable_web_service,"onUpdate:modelValue":t[25]||(t[25]=function(t){return e.form.enable_web_service=t}),disabled:1===parseInt(e.form.v2ray_config.transport_type.toString())||3===parseInt(e.form.v2ray_config.transport_type.toString())},null,8,["modelValue","disabled"])]})),_:1}),Object(r["createVNode"])(H,{class:"form-item-1",label:"伪装站点","label-width":"80px"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(F,{modelValue:e.form.web_service_type,"onUpdate:modelValue":t[26]||(t[26]=function(t){return e.form.web_service_type=t}),class:"w-100"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(z,{value:"cloudreve",label:"Cloudreve"})]})),_:1},8,["modelValue"])]})),_:1})]),e.form.enable_web_service&&"cloudreve"===e.form.web_service_type?(Object(r["openBlock"])(),Object(r["createElementBlock"])(r["Fragment"],{key:2},[Object(r["createVNode"])(R,{class:"margin-top margin-bottom"},{default:Object(r["withCtx"])((function(){return[C]})),_:1}),Object(r["createVNode"])(H,{label:"Cloudreve配置"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(L,{modelValue:e.form.cloudreve_config.enable_aria2,"onUpdate:modelValue":t[27]||(t[27]=function(t){return e.form.cloudreve_config.enable_aria2=t}),label:"启用Aria2离线下载支持(不懂不要选)"},null,8,["modelValue"]),Object(r["createVNode"])(L,{modelValue:e.form.cloudreve_config.reset_admin_password,"onUpdate:modelValue":t[28]||(t[28]=function(t){return e.form.cloudreve_config.reset_admin_password=t}),label:"重置管理员密码(首次部署请选中，否则无法获取初始密码)"},null,8,["modelValue"])]})),_:1}),e.form.cloudreve_config.reset_admin_password?(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",x,[Object(r["createVNode"])(H,{class:"form-item",label:"初始管理员账号"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(q,{modelValue:e.response.cloudreve_admin,"onUpdate:modelValue":t[29]||(t[29]=function(t){return e.response.cloudreve_admin=t}),readonly:"",placeholder:"将在部署成功后回显"},null,8,["modelValue"])]})),_:1}),Object(r["createVNode"])(H,{class:"form-item",label:"初始管理员密码"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(q,{modelValue:e.response.cloudreve_password,"onUpdate:modelValue":t[30]||(t[30]=function(t){return e.response.cloudreve_password=t}),readonly:"",placeholder:"将在部署成功后回显"},null,8,["modelValue"])]})),_:1})])):Object(r["createCommentVNode"])("",!0)],64)):Object(r["createCommentVNode"])("",!0)]})),_:1})):Object(r["createCommentVNode"])("",!0)]})),_:1},8,["modelValue"])):Object(r["createCommentVNode"])("",!0),Object(r["createVNode"])(H,{class:"content-center","label-width":"0"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(D,{type:"success",onClick:t[32]||(t[32]=function(t){return e.$router.back()}),disabled:e.deploying},{default:Object(r["withCtx"])((function(){return[T]})),_:1},8,["disabled"]),Object(r["createVNode"])(D,{loading:e.deploying,type:"primary",onClick:e.save},{default:Object(r["withCtx"])((function(){return[B]})),_:1},8,["loading","onClick"])]})),_:1})]})),_:1},8,["model","rules"])])}Object(r["popScopeId"])();o("498a");var U=o("262e"),I=o("2caf"),E=o("d4ec"),P=o("89df"),H="/api/v2ray-server-deploy",q=function e(){Object(E["a"])(this,e),this.install_type=1,this.management_key="",this.use_tls=!1,this.tls_host="",this.cert_type=1,this.enable_web_service=!1,this.web_service_type="cloudreve",this.cloudreve_config=new(function(){function e(){Object(E["a"])(this,e),this.enable_aria2=!1,this.reset_admin_password=!0}return e}()),this.config_type=1,this.v2ray_config=new(function(){function e(){Object(E["a"])(this,e),this.clients=new Array,this.v2ray_port=3e3,this.transport_type=1,this.tcp=new(function(){function e(){Object(E["a"])(this,e),this.type="none",this.request=new(function(){function e(){Object(E["a"])(this,e),this.version="1.1",this.method="GET",this.path="",this.headers=new Array}return e}()),this.response=new(function(){function e(){Object(E["a"])(this,e),this.version="1.1",this.status="200",this.reason="OK",this.headers=new Array}return e}())}return e}()),this.web_socket=new(function(){function e(){Object(E["a"])(this,e),this.path="",this.headers=new Array}return e}()),this.kcp=new(function(){function e(){Object(E["a"])(this,e),this.mtu=1350,this.tti=50,this.uplink_capacity=5,this.downlink_capacity=20,this.congestion=!1,this.read_buffer_size=2,this.write_buffer_size=2,this.type="none"}return e}()),this.http2=new(function(){function e(){Object(E["a"])(this,e),this.host="",this.path="/"}return e}())}return e}())},z=(P["a"],function e(){Object(E["a"])(this,e),this.cloudreve_admin="",this.cloudreve_password=""}),F=function e(){Object(E["a"])(this,e),this.user_id="",this.alter_id=4},D=o("bc3a"),M=o.n(D),A=o("6821"),K=Object(r["defineComponent"])({name:"Deploy",created:function(){this.form.v2ray_config.v2ray_port=3e3,this.form.v2ray_config.transport_type=2,this.form.v2ray_config.web_socket.path="/v2ray-ws-path",this.form.use_tls=!0,this.form.enable_web_service=!0,this.form.v2ray_config.clients=new Array,this.addClient()},watch:{"form.config_type":function(){1==this.form.config_type&&(this.form.v2ray_config.v2ray_port=3e3,this.form.v2ray_config.transport_type=2,this.form.v2ray_config.web_socket.path="/v2ray-ws-path",this.form.use_tls=!0,this.form.enable_web_service=!0),2==this.form.config_type&&(this.form.v2ray_config.v2ray_port=3e3,this.form.v2ray_config.transport_type=3,this.form.use_tls=!1,this.form.enable_web_service=!1),3==this.form.config_type&&(this.form.v2ray_config.v2ray_port=3e3,this.form.v2ray_config.transport_type=1,this.form.use_tls=!1,this.form.enable_web_service=!1)},"form.v2ray_config.transport_type":function(){4==this.form.v2ray_config.transport_type&&(this.form.use_tls=!0),3==this.form.v2ray_config.transport_type&&(this.form.use_tls=!1),1!=this.form.v2ray_config.transport_type&&3!=this.form.v2ray_config.transport_type||(this.form.enable_web_service=!1)}},data:function(){return{active:[1,2,3],deploying:!1,form:new q,rules:{management_key:[{required:!0,message:"必须提供管理员口令",trigger:"blur"}],tls_host:[{validator:this.validateTlsHost,trigger:"blur"}]},headers:[],response:new z}},methods:{save:function(){var e=this,t=this.$refs.V2rayServerDeploy;t.validate((function(t){if(t){e.form.v2ray_config.v2ray_port=parseInt(e.form.v2ray_config.v2ray_port.toString()),e.form.v2ray_config.kcp.mtu=parseInt(e.form.v2ray_config.kcp.mtu.toString()),e.form.v2ray_config.kcp.tti=parseInt(e.form.v2ray_config.kcp.tti.toString()),e.form.v2ray_config.kcp.uplink_capacity=parseInt(e.form.v2ray_config.kcp.uplink_capacity.toString()),e.form.v2ray_config.kcp.downlink_capacity=parseInt(e.form.v2ray_config.kcp.downlink_capacity.toString()),e.form.v2ray_config.kcp.read_buffer_size=parseInt(e.form.v2ray_config.kcp.read_buffer_size.toString()),e.form.v2ray_config.kcp.write_buffer_size=parseInt(e.form.v2ray_config.kcp.write_buffer_size.toString());for(var o=0;o<e.form.v2ray_config.clients.length;o++)e.form.v2ray_config.clients[o].alter_id=parseInt(e.form.v2ray_config.clients[o].alter_id.toString());var r=new q;Object.assign(r,e.form),r.management_key=A(r.management_key),e.deploying=!0,M.a.post(H,r).then((function(t){e.deploying=!1,0==t.data.code?(e.response=t.data.data,e.$message.success("部署成功，已自动生成配置文件")):e.$message.error(t.data.message)}))}}))},addWebSocketHeader:function(){this.form.v2ray_config.web_socket.headers.push(new P["b"])},addTcpRequestHeader:function(){this.form.v2ray_config.tcp.request.headers.push(new P["b"])},addTcpResponseHeader:function(){this.form.v2ray_config.tcp.response.headers.push(new P["b"])},addClient:function(){this.form.v2ray_config.clients.push(new F)},validateTlsHost:function(e,t,o){this.form.use_tls&&""==this.form.tls_host.trim()?o(new Error("开启HTTPS时必须填写HTTPS域名")):o()}}});o("a608");K.render=S,K.__scopeId="data-v-276126b0";t["default"]=K},de8c:function(e,t,o){}}]);