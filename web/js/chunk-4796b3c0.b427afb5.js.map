{"version":3,"sources":["webpack:///./src/views/auth/Login.vue","webpack:///./src/api/login.ts","webpack:///./src/views/auth/Login.vue?9541","webpack:///./src/views/auth/Login.vue?4c7f","webpack:///./src/views/auth/Login.vue?d035","webpack:///./src/views/auth/Login.vue?6ef1"],"names":["class","ref","model","form","rules","label-width","onsubmit","login","prop","key","placeholder","size","autocomplete","prefix-icon","append","loading","logging","type","icon","API_LOGIN","md5","name","data","required","message","trigger","methods","this","$refs","validate","valid","body","a","post","then","response","code","token","expired","$store","commit","redirect","$route","query","window","location","href","$message","error","render","__scopeId"],"mappings":"iNACOA,MAAM,a,GACJA,MAAM,c,gPADb,gCAaM,MAbN,EAaM,CAZJ,gCAWM,MAXN,EAWM,CAVJ,yBASU,GATDC,IAAI,YAAaC,MAAO,EAAAC,KAAOC,MAAO,EAAAA,MAAOC,cAAY,IAAIC,SAAS,eAAoB,SAAQ,EAAAC,O,+BACzG,iBAOe,CAPf,yBAOe,GAPDC,KAAK,OAAK,C,8BACtB,iBAKW,CALX,yBAKW,G,WALQ,EAAAL,KAAKM,I,qDAAL,EAAAN,KAAKM,IAAG,IAAEC,YAAY,KAAKC,KAAK,SAASC,aAAa,MAC/DC,cAAY,e,CACTC,OAAM,sBACf,iBAA6F,CAA7F,yBAA6F,GAAjFC,QAAS,EAAAC,QAASC,KAAK,UAAW,QAAO,EAAAV,MAAOW,KAAK,iB,mNCNlEC,EAAY,YAEZ,EAAb,oCAES,KAAAV,IAAc,I,GAGY,O,WCH7BW,EAAM,EAAQ,QAEL,+BAAgB,CAC7BC,KAAM,QAENC,KAH6B,WAI3B,MAAO,CACLnB,KAAM,IAAI,EACVC,MAAO,CACLK,IAAK,CAAC,CAACc,UAAU,EAAMC,QAAS,QAASC,QAAS,UAEpDT,SAAS,IAIbU,QAAS,CACPnB,MADO,WACF,WACGJ,EAAOwB,KAAKC,MAAM,aA+BxB,OA7BAzB,EAAK0B,UAAS,SAACC,GACb,IAAKA,EACH,OAAO,EAGT,IAAMC,EAAO,IAAI,EACjBA,EAAKtB,IAAMW,EAAI,EAAKjB,KAAKM,KAEzB,EAAKO,SAAU,EACf,EAAAgB,EAAMC,KAAKd,EAAWY,GAAMG,MAAK,SAACC,GAGhC,GAFA,EAAKnB,SAAU,EAEX,GAAKmB,EAASb,KAAKc,KAAvB,CAMA,IAAMC,EAAQ,IAAI,OAClBA,EAAMA,MAAQF,EAASb,KAAKA,KAAKe,MACjCA,EAAMC,QAAUH,EAASb,KAAKA,KAAKgB,QAEnC,EAAKC,OAAOC,OAAO,QAASH,GAC5B,IAAMI,EAAW,EAAKC,OAAOC,MAAMF,SAEnCG,OAAOC,SAASC,KAAOL,GAAsB,SAZ3C,EAAKM,SAASC,MAAMb,EAASb,KAAKE,gBAgBjC,M,oBChDb,EAAOyB,OAASA,EAChB,EAAOC,UAAY,kBAEJ,gB,yDCTf,W,kCCAA","file":"js/chunk-4796b3c0.b427afb5.js","sourcesContent":["<template>\n  <div class=\"login-box\">\n    <div class=\"login-form\">\n      <el-form ref=\"LoginForm\" :model=\"form\" :rules=\"rules\" label-width=\"0\" onsubmit=\"return false\" v-on:submit=\"login\">\n        <el-form-item prop=\"key\">\n          <el-input v-model=\"form.key\" placeholder=\"口令\" size=\"medium\" autocomplete=\"off\"\n                    prefix-icon=\"el-icon-key\">\n            <template #append>\n              <el-button :loading=\"logging\" type=\"primary\" @click=\"login\" icon=\"el-icon-check\"></el-button>\n            </template>\n          </el-input>\n        </el-form-item>\n      </el-form>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport {defineComponent} from 'vue'\nimport axios, {AxiosResponse} from \"axios\"\nimport {API_LOGIN, LoginForm, LoginResponse} from \"@/api/login\"\nimport {StoryStateToken} from \"@/store\"\n\nconst md5 = require('md5')\n\nexport default defineComponent({\n  name: \"Login\",\n\n  data() {\n    return {\n      form: new LoginForm(),\n      rules: {\n        key: [{required: true, message: '请输入口令', trigger: 'blur'},],\n      },\n      logging: false,\n    }\n  },\n\n  methods: {\n    login() {\n      const form = this.$refs['LoginForm'] as any\n\n      form.validate((valid: boolean) => {\n        if (!valid) {\n          return false\n        }\n\n        const body = new LoginForm()\n        body.key = md5(this.form.key)\n\n        this.logging = true\n        axios.post(API_LOGIN, body).then((response: AxiosResponse<LoginResponse>) => {\n          this.logging = false\n\n          if (0 != response.data.code) {\n            this.$message.error(response.data.message)\n\n            return\n          }\n\n          const token = new StoryStateToken()\n          token.token = response.data.data.token\n          token.expired = response.data.data.expired\n\n          this.$store.commit('token', token)\n          const redirect = this.$route.query.redirect as string\n\n          window.location.href = redirect ? redirect : '/'\n        })\n      })\n\n      return false\n    }\n  },\n})\n</script>\n\n<style lang=\"scss\">\nbody {\n  background-color: #2d3a4b;\n}\n</style>\n\n<style lang=\"scss\" scoped>\n.login-box {\n  color: #eee;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 60vh;\n\n  .login-form {\n    min-width: 20%;\n\n    .login-form-title {\n      font-size: 2em;\n      margin-bottom: 45px;\n      text-align: center;\n    }\n\n    .el-form-item {\n      display: flex;\n\n      ::v-deep .el-form-item__content {\n        flex-grow: 1;\n\n        .el-input__inner {\n          color: #eee;\n          background-color: #2d3a4b;\n          border: 1px solid hsla(0, 0%, 100%, .1);\n        }\n      }\n    }\n  }\n}\n</style>\n","import {BaseResponse} from \"@/api/base\"\n\nexport const API_LOGIN = \"/api/auth\"\n\nexport class LoginForm {\n\n  public key: string = ''\n}\n\nexport class LoginResponse extends BaseResponse {\n\n  public data = new class {\n\n    public token: string = ''\n\n    public expired: number = 0\n  }\n}\n","\nimport {defineComponent} from 'vue'\nimport axios, {AxiosResponse} from \"axios\"\nimport {API_LOGIN, LoginForm, LoginResponse} from \"@/api/login\"\nimport {StoryStateToken} from \"@/store\"\n\nconst md5 = require('md5')\n\nexport default defineComponent({\n  name: \"Login\",\n\n  data() {\n    return {\n      form: new LoginForm(),\n      rules: {\n        key: [{required: true, message: '请输入口令', trigger: 'blur'},],\n      },\n      logging: false,\n    }\n  },\n\n  methods: {\n    login() {\n      const form = this.$refs['LoginForm'] as any\n\n      form.validate((valid: boolean) => {\n        if (!valid) {\n          return false\n        }\n\n        const body = new LoginForm()\n        body.key = md5(this.form.key)\n\n        this.logging = true\n        axios.post(API_LOGIN, body).then((response: AxiosResponse<LoginResponse>) => {\n          this.logging = false\n\n          if (0 != response.data.code) {\n            this.$message.error(response.data.message)\n\n            return\n          }\n\n          const token = new StoryStateToken()\n          token.token = response.data.data.token\n          token.expired = response.data.data.expired\n\n          this.$store.commit('token', token)\n          const redirect = this.$route.query.redirect as string\n\n          window.location.href = redirect ? redirect : '/'\n        })\n      })\n\n      return false\n    }\n  },\n})\n","import { render } from \"./Login.vue?vue&type=template&id=1ddbc933&scoped=true\"\nimport script from \"./Login.vue?vue&type=script&lang=ts\"\nexport * from \"./Login.vue?vue&type=script&lang=ts\"\n\nimport \"./Login.vue?vue&type=style&index=0&id=1ddbc933&lang=scss\"\nimport \"./Login.vue?vue&type=style&index=1&id=1ddbc933&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-1ddbc933\"\n\nexport default script","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Login.vue?vue&type=style&index=0&id=1ddbc933&lang=scss\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Login.vue?vue&type=style&index=1&id=1ddbc933&lang=scss&scoped=true\""],"sourceRoot":""}