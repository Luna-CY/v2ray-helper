{"version":3,"sources":["webpack:///./src/views/auth/Login.vue","webpack:///./src/api/login.ts","webpack:///./src/views/auth/Login.vue?931d","webpack:///./src/views/auth/Login.vue?edfd","webpack:///./src/views/auth/Login.vue?3b80","webpack:///./src/views/auth/Login.vue?56f8"],"names":["class","ref","model","form","rules","label-width","prop","key","placeholder","size","autocomplete","prefix-icon","loading","logging","type","login","API_LOGIN","md5","name","data","required","message","trigger","methods","this","$refs","validate","valid","loginForm","a","post","then","response","code","token","expired","$store","commit","redirect","$route","query","window","location","href","$message","error","render","__scopeId"],"mappings":"yMACOA,MAAM,a,GACJA,MAAM,c,iBAO4E,M,4KARzF,eAYM,MAZN,EAYM,CAXJ,eAUM,MAVN,EAUM,CATJ,eAQU,GARDC,IAAI,YAAaC,MAAO,EAAAC,KAAOC,MAAO,EAAAA,MAAOC,cAAY,IAAK,SAAM,6BAAP,cAAkB,e,0BACtF,iBAGe,CAHf,eAGe,GAHDC,KAAK,OAAK,C,yBACtB,iBAC+C,CAD/C,eAC+C,G,WAD5B,EAAAH,KAAKI,I,qDAAL,EAAAJ,KAAKI,IAAG,IAAEC,YAAY,KAAKC,KAAK,SAASC,aAAa,MAC/DC,cAAY,e,iCAExB,eAEe,Q,yBADb,iBAA+F,CAA/F,eAA+F,GAAnFC,QAAS,EAAAC,QAASb,MAAM,eAAec,KAAK,UAAW,QAAO,EAAAC,O,0BAAO,iBAAE,C,0KCPhFC,EAAY,YAEZ,EAAb,oCAES,KAAAT,IAAc,I,GAGY,O,WCH7BU,EAAM,EAAQ,QAEL,iBAAgB,CAC7BC,KAAM,QAENC,KAH6B,WAI3B,MAAO,CACLhB,KAAM,IAAI,EACVC,MAAO,CACLG,IAAK,CAAC,CAACa,UAAU,EAAMC,QAAS,QAASC,QAAS,UAEpDT,SAAS,IAIbU,QAAS,CACPR,MADO,WACF,WACGZ,EAAOqB,KAAKC,MAAM,aAExBtB,EAAKuB,UAAS,SAACC,GACb,GAAKA,EAAL,CAIA,IAAMC,EAAY,IAAI,EACtBA,EAAUrB,IAAMU,EAAI,EAAKd,KAAKI,KAE9B,EAAKM,SAAU,EACf,EAAAgB,EAAMC,KAAKd,EAAWY,GAAWG,MAAK,SAACC,GAGrC,GAFA,EAAKnB,SAAU,EAEX,GAAKmB,EAASb,KAAKc,KAAvB,CAMA,IAAMC,EAAQ,IAAI,OAClBA,EAAMA,MAAQF,EAASb,KAAKA,KAAKe,MACjCA,EAAMC,QAAUH,EAASb,KAAKA,KAAKgB,QAEnC,EAAKC,OAAOC,OAAO,QAASH,GAC5B,IAAMI,EAAW,EAAKC,OAAOC,MAAMF,SAEnCG,OAAOC,SAASC,KAAOL,GAAsB,SAZ3C,EAAKM,SAASC,MAAMb,EAASb,KAAKE,oB,oBChC9C,EAAOyB,OAASA,EAChB,EAAOC,UAAY,kBAEJ,gB,oCCTf,W,6DCAA","file":"js/chunk-d922b1a8.321c14d8.js","sourcesContent":["<template>\n  <div class=\"login-box\">\n    <div class=\"login-form\">\n      <el-form ref=\"LoginForm\" :model=\"form\" :rules=\"rules\" label-width=\"0\" @submit.prevent=\"\">\n        <el-form-item prop=\"key\">\n          <el-input v-model=\"form.key\" placeholder=\"口令\" size=\"medium\" autocomplete=\"off\"\n                    prefix-icon=\"el-icon-key\"></el-input>\n        </el-form-item>\n        <el-form-item>\n          <el-button :loading=\"logging\" class=\"login-button\" type=\"primary\" @click=\"login\">验证</el-button>\n        </el-form-item>\n      </el-form>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport {defineComponent} from 'vue'\nimport axios, {AxiosResponse} from \"axios\"\nimport {API_LOGIN, LoginForm, LoginResponse} from \"@/api/login\"\nimport {StoryStateToken} from \"@/store\"\n\nconst md5 = require('md5')\n\nexport default defineComponent({\n  name: \"Login\",\n\n  data() {\n    return {\n      form: new LoginForm(),\n      rules: {\n        key: [{required: true, message: '请输入口令', trigger: 'blur'},],\n      },\n      logging: false,\n    }\n  },\n\n  methods: {\n    login() {\n      const form = this.$refs['LoginForm'] as any\n\n      form.validate((valid: boolean) => {\n        if (!valid) {\n          return\n        }\n\n        const loginForm = new LoginForm()\n        loginForm.key = md5(this.form.key)\n\n        this.logging = true\n        axios.post(API_LOGIN, loginForm).then((response: AxiosResponse<LoginResponse>) => {\n          this.logging = false\n\n          if (0 != response.data.code) {\n            this.$message.error(response.data.message)\n\n            return\n          }\n\n          const token = new StoryStateToken()\n          token.token = response.data.data.token\n          token.expired = response.data.data.expired\n\n          this.$store.commit('token', token)\n          const redirect = this.$route.query.redirect as string\n\n          window.location.href = redirect ? redirect : '/'\n        })\n      })\n    }\n  },\n})\n</script>\n\n<style lang=\"scss\">\nbody {\n  background-color: #2d3a4b;\n}\n</style>\n\n<style lang=\"scss\" scoped>\n.login-box {\n  color: #eee;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 60vh;\n\n  .login-form {\n    min-width: 20%;\n    max-width: 30%;\n\n    .login-form-title {\n      font-size: 2em;\n      margin-bottom: 45px;\n      text-align: center;\n    }\n\n    .login-button {\n      width: 100%;\n    }\n\n    .el-form-item {\n      display: flex;\n\n      ::v-deep .el-form-item__content {\n        flex-grow: 1;\n\n        .el-input__inner {\n          color: #eee;\n          background-color: #2d3a4b;\n          border: 1px solid hsla(0, 0%, 100%, .1);\n        }\n      }\n    }\n  }\n}\n</style>\n","import {BaseResponse} from \"@/api/base\"\n\nexport const API_LOGIN = \"/api/auth\"\n\nexport class LoginForm {\n\n  public key: string = ''\n}\n\nexport class LoginResponse extends BaseResponse {\n\n  public data = new class {\n\n    public token: string = ''\n\n    public expired: number = 0\n  }\n}\n","\nimport {defineComponent} from 'vue'\nimport axios, {AxiosResponse} from \"axios\"\nimport {API_LOGIN, LoginForm, LoginResponse} from \"@/api/login\"\nimport {StoryStateToken} from \"@/store\"\n\nconst md5 = require('md5')\n\nexport default defineComponent({\n  name: \"Login\",\n\n  data() {\n    return {\n      form: new LoginForm(),\n      rules: {\n        key: [{required: true, message: '请输入口令', trigger: 'blur'},],\n      },\n      logging: false,\n    }\n  },\n\n  methods: {\n    login() {\n      const form = this.$refs['LoginForm'] as any\n\n      form.validate((valid: boolean) => {\n        if (!valid) {\n          return\n        }\n\n        const loginForm = new LoginForm()\n        loginForm.key = md5(this.form.key)\n\n        this.logging = true\n        axios.post(API_LOGIN, loginForm).then((response: AxiosResponse<LoginResponse>) => {\n          this.logging = false\n\n          if (0 != response.data.code) {\n            this.$message.error(response.data.message)\n\n            return\n          }\n\n          const token = new StoryStateToken()\n          token.token = response.data.data.token\n          token.expired = response.data.data.expired\n\n          this.$store.commit('token', token)\n          const redirect = this.$route.query.redirect as string\n\n          window.location.href = redirect ? redirect : '/'\n        })\n      })\n    }\n  },\n})\n","import { render } from \"./Login.vue?vue&type=template&id=26314dfc&scoped=true\"\nimport script from \"./Login.vue?vue&type=script&lang=ts\"\nexport * from \"./Login.vue?vue&type=script&lang=ts\"\n\nimport \"./Login.vue?vue&type=style&index=0&id=26314dfc&lang=scss\"\nimport \"./Login.vue?vue&type=style&index=1&id=26314dfc&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-26314dfc\"\n\nexport default script","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Login.vue?vue&type=style&index=1&id=26314dfc&lang=scss&scoped=true\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Login.vue?vue&type=style&index=0&id=26314dfc&lang=scss\""],"sourceRoot":""}